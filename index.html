<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>G911 리마 1:1 퍼스널 비서 + 코드 예시</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: linear-gradient(120deg,#f3f4fa,#dde6f7 60%);}
    #log { font-size:15px;}
    pre, code {
      background: #f6f8fa;
      color: #22223b;
      font-family: 'Fira Mono', 'Consolas', monospace;
      font-size: 13px;
      line-height: 1.4;
      border-radius: 8px;
      padding: 10px 13px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
      margin-bottom: 14px;
      display: block;
      max-width: 100vw;
    }
    .btn { @apply bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition; }
  </style>
</head>
<body>
  <div class="max-w-lg mx-auto my-10 bg-white rounded-2xl shadow-xl p-6">
    <h2 class="text-2xl font-bold text-indigo-700 mb-3 text-center">G911 리마 1:1 퍼스널 비서</h2>
    <div id="log" class="bg-slate-100 rounded p-3 h-40 mb-4 overflow-y-auto"></div>
    <div class="flex gap-2 mb-2">
      <input id="cmd" type="text" class="flex-1 border border-indigo-200 rounded-lg p-2"
        placeholder="리마에게 명령 (예: 유튜브, 파일, 분석, 코드, 할 일)" onkeydown="if(event.key==='Enter'){send();}">
      <button onclick="send()" class="btn">전송</button>
    </div>
    <div class="flex gap-2">
      <button onclick="saveLog()" class="btn bg-slate-500 hover:bg-slate-700">대화 기록 다운로드</button>
      <button onclick="window.open('https://studio.youtube.com','_blank')" class="btn bg-indigo-500 hover:bg-indigo-700">유튜브 스튜디오</button>
    </div>
  </div>
  <script>
    let chatHist = [];
    function log(msg, isRaw) {
      chatHist.push(msg.replace(/<[^>]+>/g,""));
      const logEl = document.getElementById('log');
      if(isRaw) logEl.innerHTML += msg;
      else logEl.innerHTML += `<div>${msg}</div>`;
      logEl.scrollTop = 99999;
    }
    // 명령 실행
    async function send() {
      const el = document.getElementById('cmd');
      const msg = el.value.trim();
      if(!msg) return;
      log(`<b>나:</b> ${msg}`);
      el.value = '';
      // 코드 예시 보여주기
      if(/셀레니움|python|코드|자동화/i.test(msg)) {
        log(`<b>리마:</b> 아래는 유튜브 자동 업로드 셀레니움(Python) 예시 코드입니다:<br>
<pre><code># run_youtube_upload.py (PC에서 실행)
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
import time

driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()))
driver.get('https://studio.youtube.com')
time.sleep(8)  # 로그인(쿠키/프로필 활용 가능)

upload_btn = driver.find_element(By.XPATH, '//*[text()="만들기"]')
upload_btn.click()
time.sleep(1)
select_btn = driver.find_element(By.XPATH, '//input[@type="file"]')
select_btn.send_keys(r"C:\\video\\test.mp4")  # 업로드 파일 경로

time.sleep(5)
title = driver.find_element(By.ID, 'textbox')
title.clear()
title.send_keys("테스트 업로드 by 리마")
# ...</code></pre>`, true);
      }
      // 파일 생성
      else if(/파일|txt|기록/.test(msg)) {
        const text = '리마가 만든 텍스트 파일\n' + new Date().toLocaleString();
        const blob = new Blob([text], {type:'text/plain'});
        const url = URL.createObjectURL(blob);
        log(`<b>리마:</b> <a href="${url}" download="리마파일.txt" class="text-indigo-600 underline">여기서 txt 파일 다운</a>`);
      }
      // 할 일/오늘
      else if(/오늘|할 일|todo|ToDo/i.test(msg)) {
        log(`<b>리마:</b> 오늘 할 일<br>- 영상 업로드<br>- 유튜브 관리<br>- 공부<br>- 산책`);
      }
      // 유튜브 업로드/스튜디오
      else if(/유튜브.*(업로드|올려|등록)/i.test(msg)) {
        log(`<b>리마:</b> [유튜브 영상 업로드 안내]<br>
        1) <a href="https://studio.youtube.com" target="_blank" class="text-indigo-600 underline">유튜브 스튜디오 바로가기</a><br>
        2) 파일 선택/제목 입력/설명 작성 후 업로드<br>
        (PC 자동화/셀레니움 업로드 연동은 2차 확장에서 추가 가능)`);
      }
      // 유튜브 영상 분석 (URL 입력)
      else if(/(분석|요약|썸네일|조회수)/i.test(msg) && /(http|youtu\.be|youtube\.com)/.test(msg)) {
        let vid = msg.match(/(?:v=|youtu\.be\/)([A-Za-z0-9_-]{11})/);
        if(vid && vid[1]) {
          let id = vid[1];
          let thumb = `https://img.youtube.com/vi/${id}/mqdefault.jpg`;
          log(`<b>리마:</b> 영상 썸네일<br><img src="${thumb}" style="width:150px;border-radius:12px;margin:6px 0;"><br>
          <a href="https://youtu.be/${id}" target="_blank" class="text-indigo-600 underline">영상 바로가기</a>`);
        } else {
          log(`<b>리마:</b> 유튜브 영상 ID를 찾을 수 없습니다.`);
        }
      }
      // 분석(2): 그냥 "분석"만 입력시
      else if(/분석|요약/.test(msg)) {
        log(`<b>리마:</b> 분석 기능 준비됨. 유튜브 영상 URL을 붙여 넣어주세요!`);
      }
      else {
        log(`<b>리마:</b> 명령을 받았습니다!<br>
        - [파일 만들기/다운로드], [오늘 할 일], [유튜브 업로드], [영상 분석], [기록 저장], [코드 예시], [셀레니움/자동화] 등 다양한 실전 기능이 지원됩니다.<br>
        추가 명령은 언제든 입력해 주세요!`);
      }
    }
    // 대화 기록 txt 저장
    function saveLog() {
      const text = chatHist.join('\n');
      const blob = new Blob([text], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = '리마_대화기록.txt';
      a.click();
    }
    // 초기 인사
    log(`<b>리마:</b> 반갑습니다! 어떤 명령이든 입력해 주세요.<br>
    예: 파일 만들어줘, 오늘 할 일, 유튜브 업로드, 분석, 코드, 기록 저장 등`, false);
  </script>
</body>
</html>
