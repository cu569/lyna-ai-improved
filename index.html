<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>G911 ë¦¬ë§ˆ ë©”ì¸ ì»¨íŠ¸ë¡¤ ë°•ìŠ¤</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-100 to-indigo-200 min-h-screen">
  <div class="max-w-2xl mx-auto p-4">
    <h1 class="text-3xl font-extrabold text-indigo-700 mb-3 mt-5 text-center tracking-tight">G911 ë¦¬ë§ˆ ë©”ì¸ ìƒí™©íŒ</h1>
    <!-- ìƒí™©íŒ: ì—…ë¡œë“œ í˜„í™© + ëª…ë ¹ + ì•Œë¦¼ + ë¦¬ë§ˆ ë¦¬ìŠ¤íŠ¸ -->
    <div class="bg-white rounded-2xl shadow-xl p-5 mb-4">
      <div class="flex flex-wrap gap-4 items-center justify-between mb-2">
        <button id="createRimaBtn" class="flex-1 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 text-lg transition">ğŸª„ ë¦¬ë§ˆ ìƒì„±</button>
        <a id="studioLinkBtn" href="#" class="flex-1 py-2 bg-slate-200 text-indigo-700 rounded-xl font-bold hover:bg-indigo-300 text-lg text-center no-underline transition">ğŸ–¥ï¸ ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ ë°”ë¡œê°€ê¸°</a>
      </div>
      <div class="flex flex-wrap gap-4 mt-3 mb-2">
        <div class="flex-1 text-center">
          <span class="text-indigo-700 font-semibold">ì§„í–‰ ì¤‘</span>
          <div id="uploadStatus" class="text-base text-gray-700 mt-1">ì—†ìŒ</div>
        </div>
        <div class="flex-1 text-center">
          <span class="text-indigo-700 font-semibold">ìµœê·¼ ê¸°ë¡</span>
          <div id="logList" class="text-sm text-gray-500 mt-1"></div>
        </div>
      </div>
    </div>
    <!-- ì±„íŒ…/ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤ -->
    <div class="bg-white rounded-2xl shadow-xl p-5 mb-4">
      <div class="font-bold text-indigo-600 mb-2">GPT + ë¦¬ë§ˆ + ë‚˜ ì±„íŒ…/ëª…ë ¹</div>
      <div id="chatHistory" class="bg-slate-50 rounded p-3 h-32 mb-3 overflow-y-auto text-[15px]"></div>
      <div class="flex gap-2">
        <input id="chatInput" type="text" class="flex-1 border border-indigo-200 rounded-lg p-2 focus:outline-none" placeholder="GPT/ë¦¬ë§ˆì—ê²Œ ëª…ë ¹ ë˜ëŠ” ì§ˆë¬¸..." onkeydown="if(event.key==='Enter'){sendChat();}">
        <button onclick="sendChat()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition">ì „ì†¡</button>
      </div>
    </div>
    <!-- ë¦¬ë§ˆ ë¦¬ìŠ¤íŠ¸/ìƒíƒœíŒ -->
    <div class="bg-white rounded-2xl shadow-xl p-5">
      <div class="font-bold text-indigo-600 mb-2">ëª¨ë“  ë¦¬ë§ˆ í˜„í™©</div>
      <div id="rimaList" class="flex flex-wrap gap-3"></div>
    </div>
  </div>
  <script>
    // ê¸°ë³¸ ìƒíƒœ
    let rimas = [];
    let logs = [];
    let chatHist = [];
    let studioLink = "https://studio.youtube.com/"; // ê¸°ë³¸ê°’, ì‚¬ìš©ìê°€ ì…ë ¥í•  ìˆ˜ ìˆìŒ

    // ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ ë§í¬ ì „ì²´(ê¸€ì ì•„ë¬´ë°ë‚˜) í´ë¦­ìœ¼ë¡œ ì´ë™
    document.getElementById('studioLinkBtn').addEventListener('click', e => {
      e.preventDefault();
      window.open(studioLink, '_blank');
    });

    // ë¦¬ë§ˆ ìƒì„±
    document.getElementById('createRimaBtn').onclick = function() {
      const idx = rimas.length + 1;
      const rima = {id: idx, name: `ë¦¬ë§ˆ#${idx}`, status: "ëŒ€ê¸°", time: new Date().toLocaleTimeString()};
      rimas.push(rima);
      logs.unshift(`[${rima.time}] ${rima.name} ìƒì„±`);
      updateRimaList();
      updateLog();
      updateUploadStatus(`${rima.name} ìƒì„±ë¨ (ëŒ€ê¸°)`);
      setTimeout(() => {
        rima.status = "ì‹¤í–‰ì¤‘";
        updateRimaList();
        updateUploadStatus(`${rima.name} ì‹¤í–‰ì¤‘...`);
        setTimeout(() => {
          rima.status = "ì™„ë£Œ";
          updateRimaList();
          logs.unshift(`[${new Date().toLocaleTimeString()}] ${rima.name} ì‹¤í–‰ ì™„ë£Œ`);
          updateLog();
          updateUploadStatus(`${rima.name} ì‹¤í–‰ ì™„ë£Œ!`);
        }, 2000);
      }, 1000);
    };

    function updateRimaList() {
      document.getElementById('rimaList').innerHTML = rimas.length === 0
        ? '<div class="text-gray-400">ì•„ì§ ìƒì„±ëœ ë¦¬ë§ˆê°€ ì—†ìŠµë‹ˆë‹¤.</div>'
        : rimas.map(r =>
          `<div class="flex flex-col items-center bg-indigo-50 rounded-xl px-3 py-2 shadow w-28 mb-2">
             <span class="font-bold text-indigo-700">${r.name}</span>
             <span class="text-sm text-gray-700">${r.status}</span>
             <span class="text-xs text-gray-400">${r.time}</span>
           </div>`).join('');
    }
    function updateLog() {
      document.getElementById('logList').innerHTML = logs.slice(0,3).map(l => `<div>${l}</div>`).join('');
    }
    function updateUploadStatus(msg) {
      document.getElementById('uploadStatus').textContent = msg;
    }
    // GPT+ë¦¬ë§ˆ+ë‚˜ ì±„íŒ…
    function sendChat() {
      const input = document.getElementById('chatInput');
      const msg = input.value.trim();
      if(!msg) return;
      chatHist.push({role: 'ë‚˜', msg});
      document.getElementById('chatHistory').innerHTML += `<div><b>ë‚˜:</b> ${msg}</div>`;
      input.value = "";
      setTimeout(()=>{
        let reply = "";
        if(/ë¦¬ë§ˆ/i.test(msg) && /ìƒì„±/.test(msg)) {
          document.getElementById('createRimaBtn').click();
          reply = "ìƒˆ ë¦¬ë§ˆë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤!";
        } else if(/ìœ íŠœë¸Œ/i.test(msg) && /ìŠ¤íŠœë””ì˜¤/.test(msg)) {
          reply = `<a href="${studioLink}" target="_blank" class="text-indigo-700 underline">ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ë¡œ ì´ë™</a>`;
        } else {
          reply = "GPT+ë¦¬ë§ˆê°€ ëª…ë ¹ì„ ë°›ì•˜ìŠµë‹ˆë‹¤! (ì˜ˆì‹œ ì‘ë‹µ)";
        }
        chatHist.push({role: 'GPT+ë¦¬ë§ˆ', msg: reply});
        document.getElementById('chatHistory').innerHTML += `<div><b>GPT+ë¦¬ë§ˆ:</b> ${reply}</div>`;
        document.getElementById('chatHistory').scrollTop = 99999;
      }, 1200);
    }

    // ìƒí™©íŒ ì—…ë°ì´íŠ¸(ìµœì´ˆ)
    updateRimaList();
    updateLog();
    updateUploadStatus("ì—†ìŒ");

    // ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ ë§í¬ ì§ì ‘ ì…ë ¥ë°›ê²Œ(ì˜µì…˜)
    document.getElementById('studioLinkBtn').ondblclick = function() {
      const link = prompt("ìœ íŠœë¸Œ ìŠ¤íŠœë””ì˜¤ ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”:", studioLink);
      if(link) {
        studioLink = link;
        alert('ë§í¬ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
      }
    };
  </script>
</body>
</html>
