<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¦¬ë§ˆ 1.0 ì»¨íŠ¸ë¡¤ ë°•ìŠ¤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="max-w-xl mx-auto p-4">
    <h1 class="text-3xl font-bold text-indigo-700 text-center mt-4">ë¦¬ë§ˆ 1.0 ë©”ì¸ ìƒí™©íŒ</h1>

    <!-- ìƒíƒœ -->
    <div id="statusBox" class="bg-white p-3 mt-4 rounded-xl shadow text-center">
      <span id="statusText">ë¦¬ë§ˆ ì¤€ë¹„ ì™„ë£Œ</span>
    </div>

    <!-- ì¹´ë“œ ë©”ë‰´ -->
    <div class="grid grid-cols-2 gap-4 mt-6">
      <div onclick="openModal('upload')" class="rounded-xl bg-white shadow p-4 text-center hover:scale-105 transition">
        <span class="text-2xl">â¬†ï¸</span><p class="font-bold">ìœ íŠœë¸Œ ì—…ë¡œë“œ</p>
      </div>
      <div onclick="openModal('analysis')" class="rounded-xl bg-white shadow p-4 text-center hover:scale-105 transition">
        <span class="text-2xl">ğŸ“Š</span><p class="font-bold">ì˜ìƒ ë¶„ì„</p>
      </div>
      <div onclick="openModal('todo')" class="rounded-xl bg-white shadow p-4 text-center hover:scale-105 transition">
        <span class="text-2xl">ğŸ“</span><p class="font-bold">ì˜¤ëŠ˜ í•  ì¼</p>
      </div>
      <div onclick="openModal('chat')" class="rounded-xl bg-white shadow p-4 text-center hover:scale-105 transition">
        <span class="text-2xl">ğŸ’¬</span><p class="font-bold">ë¦¬ë§ˆ ëŒ€í™”</p>
      </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div id="modalBG" class="fixed inset-0 bg-black bg-opacity-40 hidden justify-center items-center">
      <div class="bg-white p-6 rounded-xl w-[90vw] max-w-md relative">
        <button onclick="closeModal()" class="absolute top-3 right-4 text-xl">Ã—</button>
        <div id="modalContent"></div>
      </div>
    </div>
  </div>

  <script>
    // ë¦¬ë§ˆ ê¸°ì–µ ë¶ˆëŸ¬ì˜¤ê¸°
    let rimaState = JSON.parse(localStorage.getItem('rimaState')) || { history: [] };

    function saveState() {
      localStorage.setItem('rimaState', JSON.stringify(rimaState));
    }

    function openModal(type){
      let html = "";
      if(type==='upload'){
        html = `
          <h2 class="text-xl font-bold mb-2">ìœ íŠœë¸Œ ì—…ë¡œë“œ</h2>
          <input type="text" id="videoTitle" placeholder="ì˜ìƒ ì œëª©" class="border p-2 w-full mb-2"/>
          <button onclick="uploadVideo()" class="w-full bg-indigo-600 text-white p-2 rounded">ì—…ë¡œë“œ</button>
        `;
      } else if(type==='analysis'){
        html = `
          <h2 class="text-xl font-bold mb-2">ì˜ìƒ ë¶„ì„</h2>
          <button onclick="analyzeVideo()" class="w-full bg-indigo-600 text-white p-2 rounded">ë¶„ì„ ì‹œì‘</button>
        `;
      } else if(type==='todo'){
        html = `
          <h2 class="text-xl font-bold mb-2">ì˜¤ëŠ˜ í•  ì¼</h2>
          <textarea id="todoInput" placeholder="í•  ì¼ ì…ë ¥" class="border p-2 w-full mb-2"></textarea>
          <button onclick="saveTodo()" class="w-full bg-indigo-600 text-white p-2 rounded">ì €ì¥</button>
        `;
      } else if(type==='chat'){
        html = `
          <h2 class="text-xl font-bold mb-2">ë¦¬ë§ˆì™€ ëŒ€í™”</h2>
          <div id="chatBox" class="border p-2 h-32 overflow-y-auto mb-2 bg-gray-50">${rimaState.history.map(m=>`<div>${m}</div>`).join("")}</div>
          <input type="text" id="chatInput" placeholder="ë©”ì‹œì§€ ì…ë ¥" class="border p-2 w-full mb-2"/>
          <button onclick="sendChat()" class="w-full bg-indigo-600 text-white p-2 rounded">ì „ì†¡</button>
        `;
      }
      document.getElementById('modalContent').innerHTML = html;
      document.getElementById('modalBG').classList.remove('hidden');
    }

    function closeModal(){
      document.getElementById('modalBG').classList.add('hidden');
    }

    function uploadVideo(){
      const title = document.getElementById('videoTitle').value;
      document.getElementById('statusText').innerText = `ì—…ë¡œë“œ ì¤€ë¹„: ${title}`;
      rimaState.history.push(`ì—…ë¡œë“œ ìš”ì²­: ${title}`);
      saveState();
      closeModal();
    }

    function analyzeVideo(){
      document.getElementById('statusText').innerText = "ì˜ìƒ ë¶„ì„ ì¤‘...";
      rimaState.history.push("ì˜ìƒ ë¶„ì„ ìš”ì²­");
      saveState();
      closeModal();
    }

    function saveTodo(){
      const todo = document.getElementById('todoInput').value;
      rimaState.history.push(`í•  ì¼: ${todo}`);
      document.getElementById('statusText').innerText = "ì˜¤ëŠ˜ í•  ì¼ ì €ì¥ë¨";
      saveState();
      closeModal();
    }

    function sendChat(){
      const input = document.getElementById('chatInput').value;
      rimaState.history.push(`ë‚˜: ${input}`);
      document.getElementById('chatBox').innerHTML += `<div>ë‚˜: ${input}</div>`;
      saveState();
      document.getElementById('chatInput').value = "";
    }
  </script>
</body>
</html>
