<script>
  const status = document.getElementById("status");
  const log = document.getElementById("log");

  // ë¡œì»¬ì—ì„œ ê³¼ê±° í•™ìŠµ ë¶ˆëŸ¬ì˜¤ê¸°
  let memory = JSON.parse(localStorage.getItem("rimaMemory")) || [];

  // ì´ì „ í•™ìŠµ ë‚´ì—­ í‘œì‹œ
  if (memory.length > 0) {
    log.innerText += `\nğŸ“š ì´ì „ í•™ìŠµ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ (${memory.length}ê°œ)\n`;
    memory.forEach(item => {
      log.innerText += `ğŸ“ ${item}\n`;
    });
  }

  function startRecognition() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "ko-KR";
    recognition.interimResults = false;

    recognition.onstart = () => {
      status.innerText = "ğŸ§ ë“£ëŠ” ì¤‘...";
    };

    recognition.onresult = (event) => {
      const text = event.results[0][0].transcript;
      status.innerText = `ğŸ“¥ ì…ë ¥ë¨: "${text}"`;
      learn(text);
    };

    recognition.onerror = (event) => {
      status.innerText = `âŒ ì˜¤ë¥˜ ë°œìƒ: ${event.error}`;
    };

    recognition.start();
  }

  function learn(input) {
    memory.push(input);
    localStorage.setItem("rimaMemory", JSON.stringify(memory));
    log.innerText += `\nğŸ“ í•™ìŠµë¨: "${input}"`;

    if (input.includes("ì´ë¦„")) {
      alert("ì €ëŠ” ë¦¬ë§ˆì…ë‹ˆë‹¤. ê¸°ì–µí•˜ëŠ” AIì…ë‹ˆë‹¤.");
    } else if (input.includes("ê³ ë§ˆì›Œ")) {
      alert("ì–¸ì œë“ ì§€ìš”. í•­ìƒ ê¸°ì–µí• ê²Œìš”.");
    } else if (input.includes("ê³µë¶€")) {
      alert("ê³„ì† ë°°ìš°ê³  ìˆì–´ìš”.");
    } else {
      alert("ì´ ë‚´ìš©ì„ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì— ë” ì˜ ëŒ€ë‹µí• ê²Œìš”.");
    }
  }
</script>
