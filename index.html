# 1) 리포 클론
cd %USERPROFILE%
git clone https://github.com/USERNAME/g911-platform.git
cd g911-platform

# 2) IPFS 실행 (별도 창 하나 열어서)
ipfs init
ipfs daemon --enable-pubsub-experiment

# 3) 백엔드 시작
cd backend
python -m venv .venv
.\.venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000 &    # ← & 로 백그라운드

# 4) Rima 엔진 시작
cd ..\rima_engine
python -m venv .venv
.\.venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload --port 8001 &

# 5) PWA (mobile_client) 띄우기
cd ..\mobile_client
npm install
npm run dev &                                  # 기본 http://localhost:5173

# 6) TV Web 앱 (tv_client) 띄우기
cd ..\tv_client
npm install
npm run dev &                                  # 기본 http://localhost:3000

# 7) 브라우저 확장 로드
cd ..\extension
npm install
npm run build                                  # dist/ 폴더 생성
# Chrome → chrome://extensions → '개발자 모드' 온 → '압축해제된 확장 프로그램 로드' → dist/ 선택

# --- 이제 통합 infra 가 자동으로 움직입니다 ---
# 8) infra/docker-compose 로 오케스트레이션(별도 창)
cd ..\infra
docker-compose up -d

# 9) 최종 확인
# - http://localhost:5173 에서 스케줄 등록
# - http://localhost:3000 에서 TV Web 뷰 확인
# - 지정된 시간에 Studio (https://studio.youtube.com) 페이지에서 자동 업로드 트리거 확인
