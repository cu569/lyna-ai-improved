// App.jsx (또는 index.js에 바로)
// 완전 자동 예약 업로드 & 로그 시스템

import React, { useState } from "react";

const initUploads = [
  // 샘플 데이터 (실제는 빈 배열로 시작)
  // { id: 1, title: "AI 예시", author: "리마", time: "2025-07-16 14:10", status: "예약", result: "" },
];

export default function App() {
  const [uploads, setUploads] = useState(initUploads);
  const [title, setTitle] = useState("");
  const [author, setAuthor] = useState("");
  const [time, setTime] = useState("");
  const [result, setResult] = useState("");

  // 예약 등록
  const reserveUpload = (e) => {
    e.preventDefault();
    if (!title || !author || !time) return alert("모든 항목을 입력하세요!");
    setUploads([
      ...uploads,
      {
        id: Date.now(),
        title,
        author,
        time,
        status: "예약",
        result: "",
      },
    ]);
    setTitle("");
    setAuthor("");
    setTime("");
  };

  // (테스트용) 예약 업로드 실행 버튼 (실제 서비스에서는 예약 시간 되면 자동 실행!)
  const runUpload = (uploadId) => {
    setUploads((us) =>
      us.map((u) =>
        u.id === uploadId
          ? {
              ...u,
              status: "완료",
              result: "성공",
              endTime: new Date().toLocaleString(),
            }
          : u
      )
    );
  };

  return (
    <div style={{ maxWidth: 480, margin: "40px auto", padding: 24, background: "#f9f9f9", borderRadius: 24 }}>
      <h2 style={{ color: "#2bc48a", fontWeight: 800 }}>유튜브 예약 업로드 & 자동 기록 시스템</h2>
      <form onSubmit={reserveUpload} style={{ marginBottom: 32 }}>
        <input
          placeholder="영상 제목"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          style={{ marginRight: 12, padding: 8, borderRadius: 8, border: "1px solid #ddd" }}
        />
        <input
          placeholder="업로더 (리마/이름)"
          value={author}
          onChange={(e) => setAuthor(e.target.value)}
          style={{ marginRight: 12, padding: 8, borderRadius: 8, border: "1px solid #ddd" }}
        />
        <input
          placeholder="예약시간 (2025-07-16 15:00)"
          value={time}
          onChange={(e) => setTime(e.target.value)}
          style={{ marginRight: 12, padding: 8, borderRadius: 8, border: "1px solid #ddd" }}
        />
        <button type="submit" style={{ padding: 8, borderRadius: 8, background: "#2bc48a", color: "#fff", border: "none" }}>
          예약등록
        </button>
      </form>

      <h4>예약 내역 및 로그</h4>
      <table style={{ width: "100%", background: "#fff", borderRadius: 12 }}>
        <thead>
          <tr>
            <th>제목</th>
            <th>업로더</th>
            <th>예약시간</th>
            <th>상태</th>
            <th>결과</th>
            <th>실행</th>
          </tr>
        </thead>
        <tbody>
          {uploads.length === 0 ? (
            <tr>
              <td colSpan={6} style={{ textAlign: "center", color: "#aaa" }}>
                예약 내역이 없습니다.
              </td>
            </tr>
          ) : (
            uploads.map((u) => (
              <tr key={u.id}>
                <td>{u.title}</td>
                <td>{u.author}</td>
                <td>{u.time}</td>
                <td>{u.status}</td>
                <td>{u.result}</td>
                <td>
                  {u.status === "예약" ? (
                    <button onClick={() => runUpload(u.id)} style={{ padding: 4, borderRadius: 6, background: "#555", color: "#fff" }}>
                      업로드 실행
                    </button>
                  ) : (
                    <span style={{ color: "#2bc48a", fontWeight: 600 }}>완료</span>
                  )}
                </td>
              </tr>
            ))
          )}
        </tbody>
      </table>
      <div style={{ marginTop: 24, color: "#888" }}>
        <b>※ 실제 연동시에는 예약된 시간에 자동 업로드 + 결과 자동 기록까지 실행됩니다.</b>
      </div>
    </div>
  );
}
