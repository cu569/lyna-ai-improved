<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¦¬ë§ˆ ê¸°ì–µ ì‹œìŠ¤í…œ</title>
</head>
<body>
  <h2>ğŸ§  ë¦¬ë§ˆ ê¸°ì–µ ì‹œìŠ¤í…œ</h2>
  <button onclick="startRecognition()">ğŸ¤ ë§í•˜ê¸°</button>
  <button onclick="clearMemory()">ğŸ§¹ ê¸°ì–µ ì´ˆê¸°í™”</button>
  <div id="status">â³ ëŒ€ê¸° ì¤‘...</div>
  <pre id="log"></pre>

  <script>
    const status = document.getElementById("status");
    const log = document.getElementById("log");
    let memory = JSON.parse(localStorage.getItem("rimaMemory")) || [];

    function renderMemory() {
      log.innerText = '';
      memory.forEach((item, index) => {
        log.innerText += `ğŸ“Œ ${index + 1}. ${item}\n`;
      });
    }

    renderMemory();

    function startRecognition() {
      const r = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      r.lang = "ko-KR";
      r.onstart = () => status.innerText = "ğŸ™ï¸ ë“£ëŠ” ì¤‘...";
      r.onend = () => status.innerText = "âœ… ì™„ë£Œ!";
      r.onerror = () => status.innerText = "âš ï¸ ì˜¤ë¥˜ ë°œìƒ";

      r.onresult = (e) => {
        const text = e.results[0][0].transcript;
        memory.push(text);
        localStorage.setItem("rimaMemory", JSON.stringify(memory));
        renderMemory();
      };
      r.start();
    }

    function clearMemory() {
      memory = [];
      localStorage.removeItem("rimaMemory");
      renderMemory();
    }
  </script>
</body>
</html>
